<div style="max-width:720px;margin:24px auto;font-family:system-ui,Arial">
    <h1>LaunchDarkly + Angular Demo</h1>
    
    <!-- Main content - only shown when ready -->
    <div>
      <section style="margin:16px 0;padding:12px;border:1px solid #ddd;border-radius:8px">
        <h3>Service Status</h3>
        <div>
          <span style="color: green;">✅ LaunchDarkly Service Ready</span>
        </div>
    
        <p style="margin-top:8px;font-size:12px;color:#666;">
          <strong>Note:</strong> The app uses <code>waitForReady$(500)</code> to prevent flash of fallback content. 
        </p>
      </section>
  
      <section style="margin:16px 0;padding:12px;border:1px solid #ddd;border-radius:8px">
        <h3>User Context</h3>
        <button (click)="identifyUserA()">Identify as demo-user-1 (US)</button>
        <button (click)="identifyUserB()" style="margin-left:8px">Identify as demo-user-2 (CA)</button>
        <p style="margin-top:8px;font-size:14px;color:#666;">
          Check the browser console for identify success/failure messages.
        </p>
      </section>
  
      <section style="margin:16px 0;padding:12px;border:1px solid #ddd;border-radius:8px">
        <h3>Analytics & Tracking</h3>
        
        <!-- Using the new ldTrack directive -->
        <div style="margin-bottom:12px;">
          <h4 style="margin:0 0 8px 0;font-size:14px;">Directive-based Tracking:</h4>
          <button [ldTrack]="'button-clicked'" 
                  [ldTrackData]="analyticsData">Track Event (Directive)</button>
          <button [ldTrack]="'conversion'" 
                  [ldTrackValue]="29.99" 
                  [ldTrackData]="conversionData" 
                  style="margin-left:8px">Track Conversion (Directive)</button>
          <button [ldTrack]="'hover-detected'" 
                  [ldTrackEvent]="'mouseenter'" 
                  [ldTrackData]="hoverData" 
                  style="margin-left:8px">Hover to Track</button>
        </div>
        
        <!-- Original method-based tracking -->
        <div style="margin-bottom:12px;">
          <h4 style="margin:0 0 8px 0;font-size:14px;">Method-based Tracking:</h4>
          <button (click)="trackEvent()">Track Event (Method)</button>
          <button (click)="trackConversion()" style="margin-left:8px">Track Conversion (Method)</button>
          <button (click)="flushEvents()" style="margin-left:8px">Flush Events</button>
        </div>
        
        <p style="margin-top:8px;font-size:14px;color:#666;">
          Compare directive-based tracking (automatic) vs method-based tracking (manual). 
          Check the browser console for tracking logs.
        </p>
      </section>
  
      <section style="margin:16px 0;padding:12px;border:1px solid #ddd;border-radius:8px">
        <h3>Feature Flags</h3>
        
        <!-- Using the new *ldIf directive with else clause -->
        <div *ldIf="'release-widget'; fallback: false; else: widgetUnavailableTemplate">
          <strong>release-widget:</strong> <span style="color: green;">AVAILABLE</span>
          <div style="margin-top:8px;padding:8px;background:#e8f5e8;border-radius:4px">[ Release Widget Available ]</div>
        </div>
        
        <!-- Else template for when widget is not available -->
        <ng-template #widgetUnavailableTemplate>
          <div>
            <strong>release-widget:</strong> <span style="color: red;">UNAVAILABLE</span>
            <div style="margin-top:8px;padding:8px;background:#ffe8e8;border-radius:4px">[ Release Widget Unavailable ]</div>
          </div>
        </ng-template>
        
        <div style="margin-top:8px;font-size:12px;color:#666;">
          Debug: Flag value = {{ showReleaseWidget$ | async }}
        </div>
        
        
        <div>
          <strong>welcome-text:</strong> <span style="color: green;">{{ welcomeText$ | async }}</span>
        </div>
        
        <!-- Using the new ldFlag directive for text injection -->
        <div style="margin-top:12px;">
          <strong>welcome-text (ldFlag):</strong>
          <span *ldFlag="'welcome-text'; fallback: 'Welcome!'; let message" style="color: green;">{{ message }}</span>
        </div>
        
        <!-- Using the new ldSwitch directive for multiple cases -->
        <div style="margin-top:16px;">
          <h4 style="margin:0 0 8px 0;font-size:14px;">Multi-Case Example (ldSwitch):</h4>
          <ng-container [ldSwitch]="'user-tier'" [ldSwitchFallback]="'basic'">
            <ng-template [ldSwitchCase]="'basic'">
              <div style="padding:8px;background:#e3f2fd;border-radius:4px;border-left:4px solid #2196f3;">
                <strong>Basic Tier:</strong> Limited features available
              </div>
            </ng-template>
            <ng-template [ldSwitchCase]="'premium'">
              <div style="padding:8px;background:#f3e5f5;border-radius:4px;border-left:4px solid #9c27b0;">
                <strong>Premium Tier:</strong> Advanced features unlocked
              </div>
            </ng-template>
            <ng-template [ldSwitchCase]="'enterprise'">
              <div style="padding:8px;background:#e8f5e8;border-radius:4px;border-left:4px solid #4caf50;">
                <strong>Enterprise Tier:</strong> All features + custom support
              </div>
            </ng-template>
            <ng-template ldSwitchDefault>
              <div style="padding:8px;background:#fff3e0;border-radius:4px;border-left:4px solid #ff9800;">
                <strong>Unknown Tier:</strong> Please contact support
              </div>
            </ng-template>
          </ng-container>
        </div>
        
        <!-- Using the new ldClassIf directive for conditional styling -->
        <div style="margin-top:16px;">
          <h4 style="margin:0 0 8px 0;font-size:14px;">Conditional Styling (ldClassIf):</h4>

          <!-- Test with theme = dark (which is the actual value) -->
          <div style="margin-bottom:8px;">
            <div [ldClassIf]="{ flag: 'theme', value: 'dark', class: 'dark-theme', fallback: 'light' }"
                 style="padding:12px;border-radius:8px;margin:4px 0;">
              <strong>Dark Theme Card:</strong> This card gets dark theme styling when theme = 'dark'
            </div>
          </div>
          
          <!-- Test with advanced-features = false (which is the actual value) -->
          <div style="margin-bottom:8px;">
            <div [ldClassIf]="{ flag: 'advanced-features', value: false, class: 'feature-disabled', fallback: true }"
                 style="padding:12px;border-radius:8px;margin:4px 0;">
              <strong>Disabled Feature Card:</strong> This card gets disabled styling when advanced-features is false
            </div>
          </div>
          
          <!-- Test with elseClass -->
          
          <!-- Test with ldStyle directive -->
          <div style="margin-top:16px;">
            <h4 style="margin:0 0 8px 0;font-size:14px;">Conditional Inline Styles (ldStyle):</h4>

            <!-- Test with theme = dark (which is the actual value) -->
            <div style="margin-bottom:8px;">
              <div [ldStyleIf]="{ flag: 'theme', value: 'dark', style: { background: '#2c3e50', color: 'white', border: '2px solid #34495e' }, fallback: 'light' }"
                   style="padding:12px;border-radius:8px;margin:4px 0;">
                <strong>Dark Theme Card:</strong> This card gets dark theme inline styles when theme = 'dark'
              </div>
            </div>
            
            <!-- Test with advanced-features = false (which is the actual value) -->
            <div style="margin-bottom:8px;">
              <div [ldStyleIf]="{ flag: 'advanced-features', value: false, style: { background: '#f8d7da', color: '#721c24', border: '2px solid #f5c6cb' }, elseStyle: { background: '#d4edda', color: '#155724', border: '2px solid #c3e6cb' }, fallback: true }"
                   style="padding:12px;border-radius:8px;margin:4px 0;">
                <strong>Feature Status Card:</strong> This card gets different inline styles based on advanced-features flag
              </div>
            </div>
            
            <!-- Test with user-tier = premium -->
            <div style="margin-bottom:8px;">
              <div [ldStyleIf]="{ flag: 'user-tier', value: 'premium', style: { background: 'linear-gradient(45deg, #ffd700, #ffed4e)', color: '#8b4513', border: '2px solid #daa520' }, elseStyle: { background: '#e9ecef', color: '#495057', border: '2px solid #ced4da' }, fallback: 'basic' }"
                   style="padding:12px;border-radius:8px;margin:4px 0;">
                <strong>Premium User Card:</strong> This card gets premium styling when user-tier = 'premium'
              </div>
            </div>
          </div>
          
        </div>
        
        <!-- Additional examples -->
        <div style="margin-top:16px;padding:8px;background:#f8f9fa;border-radius:4px" >
            <h4 style="margin:0 0 8px 0;font-size:14px;">Directive Examples:</h4>
              <div style="font-size:12px;font-family:monospace;" >
                <div><strong>Conditional Rendering (ldIf):</strong></div>
                <div >*ldIf="'flag'; fallback: false"</div>
                <div >*ldIf="'flag'; value: 'premium'"</div>
                <div >*ldIf="'flag'; else: elseTemplate"</div>
                <div >*ldIf="'flag'; value: 'premium'; else: elseTemplate"</div>
                <div style="margin-top:8px;"><strong>Content Injection (ldFlag):</strong></div>
                <div><code >*ldFlag="'text-flag'; fallback: 'default'; let message"</code> → <code>{{ '{' }}{{ '{'}} message {{ '}}' }}</code></div>
                <div><code >*ldFlag="'number-flag'; fallback: 5; let count"</code> → <code >{{ '{' }}{{ '{'}}  count {{ '}}' }}</code></div>
                <div><code >*ldFlag="'object-flag'; fallback: {{'{}'}} ; let config"</code> → <code >{{ '{' }}{{ '{' }}  config | json  {{ '}}' }}</code></div>
              <div style="margin-top:8px;"><strong>Multi-Case (ldSwitch):</strong></div>
              <div>&lt;ng-container [ldSwitch]="'flag'" [ldSwitchFallback]="'default'"&gt;</div>
              <div>&nbsp;&nbsp;&lt;ng-template [ldSwitchCase]="'value1'"&gt;</div>
              <div>&nbsp;&nbsp;&lt;ng-template [ldSwitchCase]="'value2'"&gt;</div>
              <div>&nbsp;&nbsp;&lt;ng-template ldSwitchDefault&gt;</div>
              <div style="margin-top:8px;"><strong>Conditional Styling (ldClassIf):</strong></div>
              <div>Object form:</div>
              <div >[ldClassIf]="&#123; flag: 'flag', class: 'class-name' &#125;"</div>
              <div >[ldClassIf]="&#123; flag: 'flag', value: 'value', class: 'class-name' &#125;"</div>
              <div >[ldClassIf]="&#123; flag: 'flag', class: ['class1', 'class2'] &#125;"</div>
              <div >[ldClassIf]="&#123; flag: 'flag', value: 'value', class: 'class1', elseClass: 'class2' &#125;"</div>
              <div>Tuple form:</div>
              <div >[ldClassIf]="['flag', 'class-name']"</div>
              <div style="margin-top:8px;"><strong>Conditional Inline Styles (ldStyle):</strong></div>
              <div>Object form:</div>
              <div >[ldStyleIf]="&#123; flag: 'flag', style: &#123; background: 'red', color: 'white' &#125; &#125;"</div>
              <div >[ldStyleIf]="&#123; flag: 'flag', value: 'value', style: &#123; background: 'blue', color: 'white' &#125; &#125;"</div>
              <div >[ldStyleIf]="&#123; flag: 'flag', style: &#123; background: 'green' &#125;, elseStyle: &#123; background: 'gray' &#125; &#125;"</div>
              <div >[ldStyleIf]="&#123; flag: 'flag', value: 'value', style: &#123; background: 'gold' &#125;, elseStyle: &#123; background: 'silver' &#125; &#125;"</div>
              <div>Tuple form:</div>
              <div >[ldStyleIf]="['flag', &#123; background: 'red', color: 'white' &#125;]"</div>
              <div style="margin-top:8px;"><strong>Event Tracking:</strong></div>
              <div >[ldTrack]="'button-clicked'" [ldTrackData]="dataObject"</div>
              <div >[ldTrack]="'conversion'" [ldTrackValue]="29.99" [ldTrackData]="dataObject"</div>
              <div >[ldTrack]="'hover-detected'" [ldTrackEvent]="'mouseenter'"</div>
            </div>
          </div>
      </section>
  
      <section style="margin:16px 0;padding:12px;border:1px solid #ddd;border-radius:8px">
        <h3>Instructions</h3>
        <ol style="font-size:14px;line-height:1.5;" >
          <li>Replace <code>your-client-id-here</code> in <code>src/environments/environment.ts</code> with your LaunchDarkly client ID</li>
          <li>Create feature flags named <code>release-widget</code>, <code>welcome-text</code>, and <code>user-tier</code> in your LaunchDarkly dashboard</li>
          <li>Set up targeting rules for different users (demo-user-1 vs demo-user-2)</li>
          <li>Click the identify buttons to see how flags change for different users</li>
          <li>The <code>LaunchDarklyService</code> provides reactive observables for all flag values</li>
          <li>Use the <code>*ldIf</code> directive for declarative conditional rendering: <code>&lt;ng-template [ldIf]="'flag-name'" [ldIfFallback]="defaultValue"&gt;</code></li>
          <li>Use <code>[ldIfElse]</code> to show alternative content when condition is false: <code>[ldIfElse]="elseTemplate"</code></li>
          <li>Use the <code>[ldFlag]</code> directive for content injection: <code>&lt;ng-template [ldFlag]="'flag-name'" [ldFlagFallback]="defaultValue" let-value&gt;</code></li>
          <li>Use the <code>[ldSwitch]</code> directive for multiple cases: <code>&lt;ng-container [ldSwitch]="'flag-name'" [ldSwitchFallback]="defaultValue"&gt;</code></li>
          <li>Use the <code>[ldClassIf]</code> directive for conditional styling: <code>[ldClassIf]="'flag-name'" [ldClass]="'css-class'"</code></li>
          <li>Use the <code>[ldTrack]</code> directive for automatic event tracking: <code>[ldTrack]="'event-name'" [ldTrackData]="dataObject"</code></li>
        </ol>
      </section>
    </div>
  </div>